<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body style="width:100px;height:200px;">

<script>
    var peach_price = 1;
    var peach = 0;
    var pitLeft = 0;
    function buy(money) {
        if (money >= 1) {
            var pits = money / peach_price;
            peach += pits;
            var calcLeft = 0;
            if (pitLeft + pits >= 3) {
                calcLeft = pitLeft;
                pitLeft = (calcLeft + pits) % 3;
                buy(Math.floor((calcLeft + pits) / 3));
            }
            else {
                pitLeft = (pitLeft + pits) % 3;
                console.log("桃子:", peach, "核:", pitLeft);
                peach = 0;
                pitLeft = 0;
            }
        }
    }
</script>
<div style="width:30px;height:30px;background: #333;position: absolute;top:0;left:0"></div>
<div style="width:30px;height:30px;background: #999;position: relative;top:0;left:0"></div>
</body>
</html>